!function(t){function e(e){for(var a,n,l=e[0],h=e[1],o=e[2],d=0,p=[];d<l.length;d++)n=l[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(t[a]=h[a]);for(c&&c(e);p.length;)p.shift()();return r.push.apply(r,o||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,l=1;l<s.length;l++){var h=s[l];0!==i[h]&&(a=!1)}a&&(r.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={0:0},r=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var l=window.webpackJsonp=window.webpackJsonp||[],h=l.push.bind(l);l.push=e,l=l.slice();for(var o=0;o<l.length;o++)e(l[o]);var c=h;r.push([69,1]),s()}({67:function(t,e,s){t.exports=s.p+"index.html"},68:function(t,e,s){},69:function(t,e,s){"use strict";s.r(e);var a=s(0);let i=0,r=0;class n{static uid(){return i+=1}static simpleUId(t=""){return t+(r+=1)}}var l=s(70);class h{constructor(t){this.element=t,this.eventListeners=[]}bind(t,e){for(const s of t.split(" ")){this.eventListeners.push({eventName:s,eventFunction:e});const t=t=>e(t.detail,t);this.element.addEventListener(s,t,!1)}}getListeners(){return this.eventListeners}trigger(t,e){this.element.dispatchEvent(new CustomEvent(t,{detail:e}))}}class o{constructor(t,e,s=0){this.parent=t,this.eventHandler=e||new h(this.parent.node()),this.ID=s}newInstance(t){}get baseName(){return`${this.cssname}_ID${this.ID}`}updateOptions(t){Object.keys(t).forEach(e=>this.options[e]=t[e])}destroy(){this.base.remove()}}var c=s(82);class d{static translate(t,e){return`translate(${t},${e})`}static rotate(t,e){return null==e?`rotate(${t})`:`rotate(${t},${e.x},${e.y})`}static skew(t,e=0){return`skew(${t}, ${e})`}static skewX(t){return`skewX(${t})`}static skewY(t){return`skewY(${t})`}static scale(t,e){return`scale(${t}, ${null!=e?e:t})`}static group(t,e,s={x:0,y:0}){return t.append("g").attr("class",e).attr("transform",d.translate(s.x,s.y))}static addSVG(t,e,s,a){return t.append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+(e+a.left+a.right)+" "+(s+a.top+a.bottom)).attr("preserveAspectRatio","xMidYMid meet").append("g").attr("transform",d.translate(a.left,a.top))}static addArrows(t){t.append("defs").append("marker").attr("id","arrow").attr("markerUnits","strokeWidth").attr("markerWidth",5.5).attr("markerHeight",5.5).attr("viewBox","0 0 12 12").attr("refX",6).attr("refY",6).attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2")}static insertArrow(t,e,s,a,i,r,n){return t.append("line").attr("x1",e).attr("y1",s).attr("x2",a).attr("y2",i).attr("stroke",r).attr("stroke-width",n).attr("marker-end","url(#arrow)")}static meshgrid(t,e,s,a){const i=(t,e)=>t.map(t=>t*(e[1]-e[0])+e[0]);return((t,e)=>{const s=[];return t.forEach(t=>{e.forEach(e=>{s.push({x:t,y:e})})}),s})(i(c.a(0,t).map(e=>(e+.5)/t),s),i(c.a(0,e).map(t=>(t+.5)/e),a))}}class p extends o{constructor(t,e,s={},a=0){super(t,e,a),this.options={margin:{top:0,right:0,bottom:0,left:0},maxWidth:450,maxHeight:450}}initSVG(t={},e=["bg","main","fg"]){this.updateOptions(t);const s=this.options;s.width=s.maxWidth-(s.margin.left+s.margin.right),s.height=s.maxHeight-(s.margin.top+s.margin.bottom),this.svg=this.parent.append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${s.width+s.margin.left+s.margin.right} ${s.height+s.margin.top+s.margin.bottom}`).append("g").attr("transform",d.translate(s.margin.left,s.margin.top)),this.base=d.group(this.svg,""),this.layers={},e&&e.forEach(t=>{this.layers[t]=d.group(this.base,t)}),this.init()}}const u=t=>t.x*t.y-1,x=a.q().domain([0,.8]).range([.001,.25]);class g{constructor(t=0,e=.1,s=u,a=x){this.err=s,this.q=t,this.eta=e,this.step2lr=a}get lrScale(){return this.step2lr(this.eta)}sqrtErr(t){return Math.sqrt(Math.abs(this.err(t)))}absErr(t){return Math.abs(this.err(t))}loss(t){return Math.pow(this.err(t),2)}gradient(t){const e=this.err(t);return{x:t.y*e,y:t.x*e}}eigenvalues(t){const e=(t,e)=>Math.pow(t,2)+Math.pow(e,2);return{x:e(t.x,t.y),y:e(t.x,t.y)}}dv(t){const e=this.gradient(t),s=this.eigenvalues(t);return{x:-e.x/Math.abs(Math.pow(s.x,this.q)),y:-e.y/Math.abs(Math.pow(s.y,this.q))}}lr(t){const e=this.dv(t),s=this.absErr(t),a=this.step2lr(this.eta);return{x:a*e.x/s,y:a*e.y/s}}next(t){const e=this.dv(t);return{x:t.x+e.x*this.eta,y:t.y+e.y*this.eta}}nextLr(t){const e=this.lr(t);return{x:t.x+3*e.x,y:t.y+3*e.y}}}class m extends g{eigenvalues(t){return{x:2*Math.pow(t.y,2),y:2*Math.pow(t.x,2)}}}var f=s(77),y=s(75),v=s(71),b=s(78);const w={stepAdded:"SimpleNet_StepAdded"};class M extends p{constructor(t,e,s={}){super(t,e,s),this.cssname="simple-graph",this.options={maxWidth:450,maxHeight:500,margin:{top:50,right:75,bottom:125,left:50},pad:30,xrange:[0,1.6],yrange:[0,1.6],n:500,m:500,circleEvery:4},this.scales={},this.sels={},this._curr={currLoc:{x:.1,y:.2},step:0},this.ideal=1,super.initSVG(this.options),this.base.classed(this.cssname,!0),this.updater=new g,this.initPlot()}setUpdater(t){this.q(),this.eta();"block"==t?this.updater=new m(this.q(),this.eta()):"full"==t?this.updater=new g(this.q(),this.eta()):console.log("Please enter a valid input as updater"),this.updateQuivers()}plotContours(){const t=this.options,e=this.scales,s=function(t,e,s,a,i){let r=new Array(t*e);for(var n=.5,l=0;n<e;++n)for(var h=.5;h<t;++h,++l){const o=h/t*(s[1]-s[0])+s[0],c=(1-n/e)*(a[1]-a[0])+a[0];r[l]=i(o,c)}return r}(t.n,t.m,t.xrange,t.yrange,(t,e)=>this.updater.absErr({x:t,y:e}));let i=a.p(a.n(s),a.l(s),.08);const r=(.95*i[0]+(1-.95)*i[1])/2;i=l.a(1,r,i),e.color=a.q().domain([-1,.1]).range([0,1]).interpolate(()=>a.h),e.contours.thresholds(i);const n=e.contours(s);this.base.append("g").attr("id","contour-group").selectAll("path.contour").data(n).join("path").attr("class","contour").attr("d",a.g(a.f().scale(t.width/t.n))).attr("fill",t=>e.color(-Math.sqrt(t.value))).classed("main-fit",t=>t.value==r).classed("not-fit",t=>t.value!=r)}addStep(t,e=null){const s=this.options,a=this.scales,i=this.sels,r=a.x.clamp(!0)(t.x),n=a.y.clamp(!0)(t.y);return null!=e&&this.base.append("line").attr("x1",a.x(e.x)).attr("y1",a.y(e.y)).attr("x2",r).attr("y2",n).classed("descending-line",!0),t.x>=s.xrange[1]||t.y>=s.yrange[1]?(this.ticker.unsubscribe(),t):(this._curr.step%s.circleEvery!=0&&null!=e||(i.circle=this.base.append("circle").attr("cx",r).attr("cy",n).attr("r",2).classed("descending-point",!0)),this._curr.step+=1,this.eventHandler.trigger(w.stepAdded,t),t)}clearCircles(){a.u(".descending-point").remove(),a.u(".descending-line").remove()}clearQuivers(){a.u(".quiver").remove(),this.sels.arrows=[]}plotDescent(){const t=this;let e=null;const s={next:t=>{this.addStep(t,e),e=t},err:t=>console.log(t),complete:()=>console.log("COMPLETE")};this.ticker=Object(f.a)(10).pipe(Object(y.a)((()=>{this.addStep(this.curr()),e=this.curr()})()),Object(v.a)(e=>t.updater.next(e),t.curr()),Object(b.a)(1e3)).subscribe(s)}intoVis(t){return{x:this.scales.x(t.x),y:this.scales.y(t.y)}}intoMath(t){return{x:this.scales.x.invert(t.x),y:this.scales.y.invert(t.y)}}updateQuivers(){const t=this,e=this.sels,s=this.scales;e.arrows.forEach(e=>{const a=this.intoMath({x:+e.attr("x1"),y:+e.attr("y1")}),i=t.updater.nextLr(a);e.attr("x2",s.x(i.x)).attr("y2",s.y(i.y))})}createQuivers(){const t=this,e=this.options,s=this.scales,a=this.sels,i=d.meshgrid(11,11,e.xrange,e.yrange),r=this.base.append("g").attr("id","quiver-group");this.clearQuivers(),a.arrows=i.map(e=>{const a=t.updater.nextLr(e),i=d.insertArrow(r,s.x(e.x),s.y(e.y),s.x(a.x),s.y(a.y),"blue",1.25);return i.classed("quiver",!0),i})}initPlot(){this.plotContours(),this.createQuivers()}init(){const t=this,e=this.options,s=this.scales,i=this.sels;d.addArrows(this.svg),s.contours=a.c().size([e.n,e.m]),s.curve=a.d.alpha(.5),s.x=a.q().domain(e.xrange).range([0,e.width]),s.y=a.q().domain(e.yrange).range([e.height,0]),i.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,e.height)).call(a.a(s.x).ticks(3,"s")),i.yaxis=this.base.append("g").attr("class","axis axis--y").attr("transform",d.translate(0,0)).call(a.b(s.y).ticks(3,"s")),i.xlabel=this.base.append("text").text("w0").attr("class","titles").attr("transform",d.translate(e.width/2,e.height+e.pad)),i.ylabel=this.base.append("text").text("w1").attr("class","titles").attr("transform",d.translate(-e.pad,e.height/2)+d.rotate(-90)),this.base.on("click",function(){null!=t.ticker&&t.ticker.unsubscribe();const e=a.o(this);t._curr.step=0,t.curr({x:s.x.invert(e[0]),y:s.y.invert(e[1])}),t.curr().x>0&&t.curr().y>0&&(t.addStep(t.curr()),t.clearCircles(),t.plotDescent())})}curr(t){return null==t?this._curr.currLoc:(this._curr.currLoc=t,this)}data(t){return null==t?this._data:(this._data=t,this)}q(t){return null==t?this.updater.q:(this.updater.q=t,this.updateQuivers(),this)}eta(t){return null==t?this.updater.eta:(this.updater.eta=t,this.updateQuivers(),this)}}M.events=w;const k=(t,e,s)=>{const i=(e-t)/(s-1);return a.p(t,e+i,i).slice(0,s)};a.v.prototype.clear=function(){return this.selectAll("*").remove(),this},a.v.prototype.toggleClass=function(t){return this.classed(t,!this.classed(t)),this},a.v.prototype.show=function(){return this.style("display","initial"),this},a.v.prototype.hide=function(){return this.style("display","none"),this},a.v.prototype.toggle=function(){var t="none"==this.style("display");return this.style("display",t?"inherit":"none")},a.v.prototype.after=function(t){var e=[];return this.each(function(){var s=document.createElement(t);this.parentNode.insertBefore(s,this.nextSibling),e.push(s)}),a.u(e)},a.v.prototype.before=function(t){var e=[];return this.each(function(){var s=document.createElement(t);this.parentNode.insertBefore(s,this),e.push(s)}),a.u(e)};var q=s(72),S=s(73),P=s(76),B=s(80);const _=t=>.5*Math.pow(t,2),L=t=>e=>t.loss(t.f(e)),I={hole:{name:"hole",f:t=>Math.tanh(13.5*t),df:t=>13.5*Math.pow(Math.cosh(13.5*t),-2),xrange:[-6/13.5,6/13.5],yrange:[0,.6],loss:_},steps:{name:"steps",f:t=>Math.tanh(13.5*t-11)/4+Math.tanh(13.5*t-6)/4+Math.tanh(13.5*t)+Math.tanh(13.5*t+6)/4+Math.tanh(13.5*t+11)/4,df:t=>13.5*(Math.pow(Math.cosh(13.5*t-11),-2)/4+Math.pow(Math.cosh(13.5*t-6),-2)/4+Math.pow(Math.cosh(13.5*t),-2)+Math.pow(Math.cosh(13.5*t+6),-2)/4+Math.pow(Math.cosh(13.5*t+11),-2)/4),xrange:[-1,1],yrange:[0,2.5],loss:_},seagull:{name:"seagull",f:t=>Math.sign(t)*(1-1/(1+Math.abs(16.5*t))),df:t=>16.5/Math.pow(1+Math.abs(16.5*t),2),xrange:[-12/16.5,12/16.5],yrange:[0,.6],loss:_},bowl:{name:"bowl",f:t=>Math.sinh(t/3),df:t=>Math.cosh(t/3)/3,xrange:[-9,9],yrange:[0,50],loss:_},deep_net:{name:"deep_net",f:t=>Math.pow(Math.abs(t/3+1),3)-1,df:t=>1*Math.pow(Math.abs(t/3+1),2),xrange:[3*-.95,.95*3],yrange:[0,4],loss:_}};class E{constructor(t,e,s=0,a=.1){this.f=t,this.df=e,this.q=s,this.eta=a}loss(t){return _(this.f(t))}gradient(t){return this.f(t)*this.df(t)}psdhess(t){return Math.pow(this.df(t),2)}updateModifier(t){return Math.pow(this.df(t),1-2*this.q)}updateAmt(t){return this.f(t)*this.updateModifier(t)}step(t){return-this.eta*this.updateAmt(t)}next(t){return t+this.step(t)}}var X=s(79);class T{constructor(t,e,s=0){this.updater=t,this._x=s,this.classname=e,this.stream=new X.a}get x(){return this._x}set x(t){this._x=t}nextX(){return this.updater.next(this._x)}next(){this.nextX();return new T(this.updater,this.classname,this.nextX())}step_(t=null){return this.x=null!=t?t:this.nextX(),this.stream.next({classname:this.classname,x:this.x,loss:this.updater.loss(this.x)}),this}toVec(t){return{x:this._x,y:t(this._x)}}q(t){return null==t?this.updater.q:(this.updater.q=t,this)}eta(t){return null==t?this.updater.eta:(this.updater.eta=t,this)}}class A extends p{constructor(t,e,s={},a=0){super(t,e,s,a),this.cssname="golf-hole-chart",this.options={maxWidth:400,maxHeight:200,margin:{top:5,right:10,bottom:40,left:10},pad:30,maxIter:600,landscape:I.hole},this.scales={},this.sels={},this.maskId=`line-mask-${this.ID}`,super.initSVG(s,["bg"]),this.base.classed(this.cssname,!0);const i=this.options.landscape,r=[new T(new E(i.f,i.df,0,.9),"golf-ball-sgd",4)];this.data(r),this.initBalls()}landscape(t){if(null==t)return this.options.landscape;const e=this.options;return e.landscape=t,this.updateScales(e),this.updateAxes(this.scales,e),this.data().forEach(e=>{e.updater.f=t.f,e.updater.df=t.df}),this.clearCurve(),this.plotCurve(),this}get dataHead(){try{return this.data()[0]}catch(t){console.log("Looks like there is no data in this golf hole"),console.log(t)}}intoVis(t){return{x:this.scales.math2px.x(t.x),y:this.scales.math2px.y(t.y)}}intoMath(t){return{x:this.scales.math2px.x.invert(t.x),y:this.scales.math2px.y.invert(t.y)}}num2vec(t){return{x:t,y:this.options.landscape.loss(t)}}ball2vis(t){return this.intoVis(t.toVec(L(this.options.landscape)))}plotBall(t){const e=(t=>"."+t)(t.classname),s=this.ball2vis(t);this.sels.ball=this.base.selectAll(e).data([s]).join("circle").classed("golf-ball",!0).classed(t.classname,!0).attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r","5px")}clearCurve(){this.layers.bg.selectAll(".line").remove(),this.sels.maskLine.html(""),this.base.selectAll("#line-background").html("")}plotCurveByDefault(t){const e=this.options,s=this.scales,a=this.sels;s.paths.forEach(e=>{this.layers.bg.append("path").datum(t).attr("class","line").attr("d",t=>e(t))}),a.lineBackground.selectAll(".grad-box").data([1]).join("rect").classed("grad-box",!0).attr("width",e.width).attr("height",e.height).attr("fill-opacity",0)}plotCurveByGradient(t){const e=this,s=this.scales,i=this.sels,r=this.options,n=r.width*(t[1]-t[0])/(a.l(t)-a.n(t)),l=e.data()[0].updater,h=s.paths[0];i.maskLine.attr("d",h(t));a.s(a.i);const o=t.map(t=>Math.log(Math.abs(l.updateModifier(t)))),c=(q.a((t,e,s)=>{const i=S.a(t,e),r=P.a(i,s);return s.map(t=>t-a.m(r))}),a.w(t,o).map(t=>({x:t[0],updateAmt:t[1]}))),d=a.q().domain([-2,0,2]).range(["#67a9cf","#f7f7f7","#ef8a62"]);i.lineBackground.selectAll(".grad-box").data(c).join("rect").classed("grad-box",!0).attr("height",r.height).attr("width",e.scales.math2px.x(n)).attr("x",t=>e.scales.math2px.x(t.x)).attr("y",0).attr("fill",t=>d(t.updateAmt)),i.lineBackground.attr("mask",`url(#${this.maskId})`)}plotCurve(){const t=this.options,e=k(t.landscape.xrange[0],t.landscape.xrange[1],1e3),s=this;this.scales,this.sels;null!=s.data()&&(s.data().length>1?s.plotCurveByDefault(e):s.plotCurveByGradient(e))}updateScales(t){const e=this.scales,s=[-1,1],i=[1,0],r=[0,t.width],n=[t.height,0];e.base2math={x:a.q().domain(s).range(t.landscape.xrange),y:a.q().domain(i).range(t.landscape.yrange)},e.base2px={x:a.q().domain(s).range(r),y:a.q().domain(i).range(n)},e.math2px={x:a.q().domain(t.landscape.xrange).range(r),y:a.q().domain(t.landscape.yrange).range(n)},e.base2loss=a.q().domain(t.landscape.yrange).range([0,1]),e.paths=this.newPaths(t.landscape)}updateAxes(t,e){this.sels.xaxis.call(a.a(t.math2px.x).tickValues([0]).tickFormat(t=>"0"))}init(){const t=this.options,e=this.scales,s=this.sels;this.updateScales(t),s.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,t.height)),s.xlabel=this.base.append("text").text("θ - θ*").attr("class","titles").attr("transform",d.translate(t.width/2,t.height+t.pad)),s.mask=this.base.append("mask").attr("id",this.maskId),s.maskBackground=s.mask.append("rect").attr("width",t.width).attr("height",t.height).attr("fill","black"),s.maskLine=s.mask.selectAll("#transparent-line").data([1]).join("path").attr("id","transparent-line").attr("stroke","white").attr("stroke-width","5px"),s.lineBackground=this.base.selectAll("#line-background").data([1]).join("g").attr("id","line-background"),s.backdrop=this.layers.bg.append("g").attr("id","backdrop").classed("grass",!0).append("rect").attr("height",t.height).attr("width",t.width),this.updateAxes(e,t),e.paths=this.newPaths(t.landscape),this.plotCurve()}newPaths(t){const e=this.scales;return[a.k().x((t,s)=>e.math2px.x(t)).y((s,a)=>e.math2px.y(L(t)(s))).curve(a.e)]}initBalls(){const t=this,e=this.options,s=t=>{let s;return s=isNaN(t)?e.landscape.xrange[0]:(t=>t<e.landscape.xrange[0])(t)?e.landscape.xrange[0]:(t=>t>e.landscape.xrange[1])(t)?e.landscape.xrange[1]:t};const i={next:e=>{e.forEach(e=>t.plotBall(e))},error:t=>console.log("ERROR: ",t),complete:()=>console.log("COMPLETE")},r=()=>Object(f.a)(10).pipe(Object(v.a)(e=>(B.a(t=>a.t(`.${t.classname}`).classed("dead-ball"),t.data())&&n.unsubscribe(),t.data().forEach(e=>(function(e){const a=e.nextX(),i=t.base.select(`.${e.classname}`),r=s(a);return i.classed("dead-ball")?e:e.step_(r)})(e)),t.data()),t.data()),Object(b.a)(e.maxIter)).subscribe(i);let n={unsubscribe:()=>console.log("Empty Ticker!")};this.sels.lineBackground.on("click",function(){n.unsubscribe();const e=function([t,e]){return{x:t,y:e}}(a.o(this));a.u(".golf-ball").classed("dead-ball",!1),t.data().forEach((s,a)=>s.x=t.intoMath(e).x),t.data().forEach(e=>t.plotBall(e)),t.eventHandler.trigger("loss-click",{}),n=r()})}q(t){return null==t?this.dataHead.updater.q:(this.dataHead.q(t),this.plotCurve(),this)}eta(t){return null==t?this.dataHead.updater.q:(this.dataHead.eta(t),this)}data(t){return null==t?this._data:(this._data=t,this.initBalls(),this)}dataToBase_(){return this.data().map(t=>(t.x=this.scales.base2math.x.invert(t.x),t)),this.data()}dataFromBase(t){return t.forEach(t=>{t.x=this.scales.base2math.x(t.x)}),this.initBalls(),this}}var V=s(81),D=s(74);class j extends p{intoVis(t){return{x:this.scales.x(t.x),y:this.scales.y(t.y)}}intoMath(t){return{x:this.scales.x.invert(t.x),y:this.scales.y.invert(t.y)}}}const $=1;class O extends j{constructor(t,e,s={}){super(t,e,s),this.cssname="line-plot",this.options={maxWidth:350,maxHeight:250,margin:{top:10,right:10,bottom:30,left:30},pad:{top:5,right:1,bottom:10,left:15},xrange:[0,600],yrange:[1.1,.001]},this.scales={},this.sels={},super.initSVG(this.options,["bg"]),this.base.classed(this.cssname,!0),this.defaultXrange=this.options.xrange,this.data({})}addDataKey_(t){const e=this;V.a(t,this.data())||(console.log(`Adding key: ${t}`),this.data()[t]={sel:e.initBaseLine(t),vals:[]})}updateScales(t){const e=this.options;this.scales.x=a.q().domain(t).range([0,e.width]).clamp(!0)}clearPaths(){this.data(P.a(t=>D.a("vals",[],t),this.data()))}plotPath(t,e){const s=this;this.addDataKey_(t.classname);const a=null==e?t=>t:e,i=this.data()[t.classname];i.vals.push(a(t.loss));const r=[Math.max(0,i.vals.length-this.options.xrange[1]),Math.max(i.vals.length,this.options.xrange[1])];this.updateScales(r),this.createPath(),i.sel.data([i]).join("path").classed(t.classname,!0).attr("d",t=>s.path(t.vals))}initBaseLine(t){return this.layers.bg.append("path").classed(t,!0).classed("line",!0)}init(){this.options,this.scales,this.sels;this.createScales(),this.createPath(),this.createAxes()}createScales(){const t=this.scales,e=this.options;t.x=a.q().domain(e.xrange).range([0,e.width]).clamp(!0),t.y=a.r().domain(e.yrange).range([0,e.height]).clamp(!0)}createAxes(){const t=this.sels,e=this.scales,s=this.options;t.yaxis=this.base.append("g").attr("class","axis axis--y").attr("transform",d.translate(0,-$)).call(a.b(e.y).tickFormat("").ticks(4)),t.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,s.height-$)).call(a.a(e.x).tickFormat("").ticks(4)),this.base.append("text").attr("transform",d.translate(s.width/2,s.margin.top+s.height+10)).style("text-anchor","middle").text("Time"),this.base.append("text").style("text-anchor","middle").text("Loss").attr("y",s.pad.left-s.margin.left).attr("x",s.pad.top-s.height/2).attr("transform",d.rotate(-90))}createPath(){this.path=a.k().x((t,e)=>this.scales.x(e)).y((t,e)=>this.scales.y(t)).curve(a.e)}data(t){return null==t?this._data:(this._data=t,this)}resetXrange_(){return this.options.xrange=this.defaultXrange,this}}const H=1;class z extends j{constructor(t,e,s={}){super(t,e,s),this.cssname="line-plot",this.options={maxWidth:350,maxHeight:250,margin:{top:10,right:10,bottom:30,left:30},pad:{top:5,right:1,bottom:10,left:15},xrange:[0,600],yrange:[1,0]},this.scales={},this.sels={},super.initSVG(this.options,["bg"]),this.base.classed(this.cssname,!0),this.defaultXrange=this.options.xrange,this.data({})}addDataKey_(t){const e=this;V.a(t,this.data())||(console.log(`Adding key: ${t}`),this.data()[t]={sel:e.initBaseLine(t),vals:[]})}clearPaths(){this.data(P.a(t=>D.a("vals",[],t),this.data()))}plotPath(t,e){const s=this;this.addDataKey_(t.classname);const a=null==e?t=>t:e,i=this.data()[t.classname];i.vals.push(a(Math.abs(t.x)));const r=[Math.max(0,i.vals.length-this.options.xrange[1]),Math.max(i.vals.length,this.options.xrange[1])];this.updateScales(r),this.createPath(),i.sel.data([i]).join("path").classed(t.classname,!0).attr("d",t=>s.path(t.vals))}updateScales(t){const e=this.options;this.scales.x=a.q().domain(t).range([0,e.width]).clamp(!0)}initBaseLine(t){return this.layers.bg.append("path").classed(t,!0).classed("line",!0)}createScales(){const t=this.options;this.scales.x=a.q().domain(t.xrange).range([0,t.width]).clamp(!0),this.scales.y=a.q().domain(t.yrange).range([0,t.height]).clamp(!0)}init(){this.options,this.scales,this.sels;this.createScales(),this.createPath(),this.createAxes()}createAxes(){const t=this.sels,e=this.scales,s=this.options;t.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,s.height-H)).call(a.a(e.x).ticks(4).tickFormat("")),t.yaxis=this.base.append("g").attr("class","axis axis--y").attr("transform",d.translate(0,-H)).call(a.b(e.y).ticks(4).tickFormat("")),this.base.append("text").attr("transform",d.translate(s.width/2,s.margin.top+s.height+10)).style("text-anchor","middle").text("Time"),this.base.append("text").style("text-anchor","middle").text("θ - θ*").attr("y",s.pad.left-s.margin.left).attr("x",s.pad.top-s.height/2).attr("transform",d.rotate(-90))}createPath(){this.path=a.k().x((t,e)=>this.scales.x(e)).y((t,e)=>this.scales.y(t)).curve(a.e)}data(t){return null==t?this._data:(this._data=t,this)}resetXrange_(){return this.options.xrange=this.defaultXrange,this}}class N extends o{constructor(t,e,s={},a=0){super(t,e,a),this.initHTML(s)}initHTML(t={}){this.updateOptions(t),this.base=this.parent.append("div")}}class C extends N{constructor(t,e,s={},a=0){super(t,e,s,a),this.cssname="simple-net-svg",this.options={},this.sels={},this.base.classed(this.cssname,!0),super.initHTML(),this.init()}get strokeWidthScale(){return a.q().range([4.2,60]).domain([0,1.7])}get opacityScale(){return a.q().range([.2,1]).domain([0,1.7])}init(){const t=this.sels;this.options;this.base.html('\n    <svg viewBox="0 0 2660 555" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="5">\n    <g id="net-value">\n      <path id="net-val-1-rect" d="M1998.8 67.6A65.8 65.8 0 001933.1 2h-163.5a65.8 65.8 0 00-65.8 65.7v27.8a65.8 65.8 0 0065.8 65.8H1933a65.8 65.8 0 0065.7-65.8V67.6z" fill="#fff" stroke="#000" stroke-width="3.8"/>\n      <text id="net-val-1" x="1826.3" y="112.4" font-family="\'IBMPlexThai-SemiBold\',\'IBM Plex Thai\',sans-serif" font-weight="600" font-size="83.3" text-anchor="middle">\n        0\n      </text>\n      <path id="net-val-0-rect" d="M945.8 67.6A65.8 65.8 0 00880 2H716.5a65.8 65.8 0 00-65.7 65.7v27.8a65.8 65.8 0 0065.7 65.8h163.6a65.8 65.8 0 0065.7-65.8V67.6z" fill="#fff" stroke="#000" stroke-width="3.8"/>\n      <text id="net-val-0" x="773.3" y="112.4" font-family="\'IBMPlexThai-SemiBold\',\'IBM Plex Thai\',sans-serif" font-weight="600" font-size="83.3" text-anchor="middle">\n        0\n      </text>\n    </g>\n    <g id="net-node" fill="#ebebeb">\n      <circle cx="276.2" cy="278.1" r="276.2"/>\n      <circle cx="1331.1" cy="278.1" r="276.2"/>\n      <circle cx="2383.1" cy="278.1" r="276.2"/>\n    </g>\n    <g id="net-line">\n      <path id="net-line-0" d="M552.5 280.2h502.4a2 2 0 000-4.2H552.5a2 2 0 000 4.2z" fill="none" stroke="#000" stroke-width="4.2" stroke-miterlimit="1.5"/>\n      <path id="net-line-1" d="M1607.3 278.1h499.5" fill="none" stroke="#000" stroke-width="4.2" stroke-miterlimit="1.5"/>\n    </g>\n    <path id="MJX-4-TEX-I-77" d="M806.2 405.3c0-2.3 1-4.4 3-6.3 2.1-2 4.4-3 6.8-3 2 0 3.8.9 5.4 2.8 1.6 2 2.5 5 2.6 9.2 0 3.2-1 9.4-3.1 18.6-1.6 6-3 11-4.4 14.9a96 96 0 01-5.6 13 30 30 0 01-8.9 11 19.4 19.4 0 01-11.6 3.8c-4.8 0-9-.9-12.6-2.6-3.7-1.7-6.3-4-8-7l-.4.7c-4.5 6-9.8 8.9-16.2 8.9a33.2 33.2 0 01-15.7-4 15.4 15.4 0 01-6-6.4 21.2 21.2 0 01-2.2-10.1 73 73 0 015.5-23.6c3.7-10 5.5-16.2 5.6-19V404c0-.3-.2-.7-.6-1.1-.4-.5-1-.7-1.8-.7h-.6c-2.5 0-4.8 1-6.8 3.1-2 2-3.7 4.3-4.9 6.6a42.7 42.7 0 00-2.7 6.8c-.6 2.2-1 3.3-1.3 3.6-.2.2-1 .3-2.6.3H717c-.7-.7-1-1.1-1-1.5a71.6 71.6 0 015-12.8c1.6-3 4-5.9 7.1-8.3 3.1-2.5 6.6-3.7 10.5-3.7 4.6 0 8.2 1.3 10.7 4 2.4 2.7 3.7 5.8 3.7 9.4 0 1.9-1.8 7.7-5.3 17.4a71.3 71.3 0 00-5.4 22.5c0 5 1.2 8.4 3.4 10.5a13 13 0 008.6 3.2c4.6 0 8.7-3.3 12.3-9.9l.8-1.4v-5.2l.1-1.3.2-1.1.1-1.5a86.4 86.4 0 001-4.8c.1-.9.4-2.2 1-3.9.5-1.7 1-3.4 1.3-5.2.3-1.7.9-4 1.8-6.9 3-12.3 4.9-18.9 5.3-19.9 1.4-2.9 3.7-4.3 7-4.3 2 0 3.4.5 4.1 1.6.8 1 1.2 2 1.3 3 0 1.5-1.5 8.3-4.7 20.7a588.2 588.2 0 00-5.1 21.4 35 35 0 00-.4 5.6v1.1c0 1.7.2 3.2.5 4.7.4 1.5 1.4 3.1 3.1 4.7 1.7 1.6 4.1 2.5 7.3 2.6 7.6 0 13.7-6.6 18.2-19.7a100 100 0 005.2-20.2c0-3.6-.7-6.4-2.1-8.4-1.4-2-2.8-3.8-4.2-5.2a6.3 6.3 0 01-2.1-4.5z" fill-rule="nonzero"/>\n    <path id="MJX-4-TEX-N-30" d="M839.1 445.9c4.3-6.2 10.1-9.3 17.5-9.3a21.4 21.4 0 0119.9 13.5c2.8 6.3 4.2 15 4.2 26 0 11.9-1.6 20.9-5 27.1a19.5 19.5 0 01-6.2 7.7 20.7 20.7 0 01-12.8 4.3c-2 0-4-.2-6-.7a20 20 0 01-6.9-3.6c-2.7-2-4.7-4.6-6.3-7.7-3.2-6.2-4.9-15.2-4.9-27 0-13.3 2.2-23.4 6.5-30.3zm25.7-1.4a10.9 10.9 0 00-16.3 0c-2 2-3.2 4.7-3.8 8.2a162 162 0 00-.9 22c0 12 .3 20 1 23.7.5 3.8 2 6.8 4 9 2.2 2.3 4.8 3.5 8 3.5 3 0 5.6-1.2 7.7-3.5 2.2-2.2 3.6-5.4 4.1-9.5.5-4.2.8-11.9 1-23.2 0-11-.4-18.3-1-21.8a16 16 0 00-3.8-8.4z" fill-rule="nonzero"/>\n    <path id="MJX-6-TEX-I-77" d="M1861.1 405.3c0-2.3 1-4.4 3-6.3 2.1-2 4.4-3 6.9-3 1.9 0 3.7.9 5.3 2.8 1.6 2 2.5 5 2.6 9.2 0 3.2-1 9.4-3 18.6-1.7 6-3.2 11-4.5 14.9a96 96 0 01-5.6 13 30 30 0 01-8.9 11 19.4 19.4 0 01-11.6 3.8c-4.8 0-9-.9-12.6-2.6-3.7-1.7-6.3-4-8-7l-.4.7c-4.4 6-9.8 8.9-16.2 8.9a33.2 33.2 0 01-15.6-4 15.4 15.4 0 01-6-6.4 21.2 21.2 0 01-2.3-10.1 73 73 0 015.5-23.6c3.7-10 5.6-16.2 5.7-19V404c0-.3-.3-.7-.7-1.1-.4-.5-1-.7-1.8-.7h-.6c-2.5 0-4.7 1-6.8 3.1-2 2-3.7 4.3-4.8 6.6a42.6 42.6 0 00-2.8 6.8c-.6 2.2-1 3.3-1.3 3.6-.2.2-1 .3-2.6.3h-2.2c-.7-.7-1-1.1-1-1.5a71.7 71.7 0 015-12.8c1.6-3 4-5.9 7.1-8.3 3.1-2.5 6.6-3.7 10.5-3.7 4.7 0 8.2 1.3 10.7 4s3.7 5.8 3.7 9.4c0 1.9-1.8 7.7-5.3 17.4a71.3 71.3 0 00-5.4 22.5c0 5 1.2 8.4 3.4 10.5a13 13 0 008.6 3.2c4.6 0 8.7-3.3 12.3-9.9l.8-1.4v-5.2l.1-1.3.2-1.1c0-.5 0-1 .2-1.5a93 93 0 001-4.8c0-.9.4-2.2.9-3.9.5-1.7 1-3.4 1.3-5.2.3-1.7 1-4 1.8-6.9 3-12.3 4.9-18.9 5.3-19.9 1.4-2.9 3.7-4.3 7-4.3 2 0 3.4.5 4.1 1.6.8 1 1.2 2 1.3 3 0 1.5-1.5 8.3-4.6 20.7a587 587 0 00-5.2 21.4c-.2 1.1-.3 3-.3 5.6v1.1c0 1.7.1 3.2.4 4.7.4 1.5 1.4 3.1 3.1 4.7 1.7 1.6 4.2 2.5 7.3 2.6 7.6 0 13.7-6.6 18.2-19.7a99.7 99.7 0 005.2-20.2c0-3.6-.7-6.4-2-8.4-1.5-2-2.9-3.8-4.3-5.2a6.3 6.3 0 01-2-4.5z" fill-rule="nonzero"/>\n    <path id="MJX-6-TEX-N-31" d="M1907.4 446.7l-1.5.6-4.5 1.1c-2 .4-4.2.6-6.7.8h-2.1v-5.3h2.1a37.2 37.2 0 0016.4-4.4c1.2-.8 2.2-1.7 3.2-2.5.1-.2.6-.4 1.3-.4.7 0 1.4.3 2 .7v68.4c.6.6 1 1 1.5 1a76.4 76.4 0 009.8.7h3v5.3h-1.3c-1.6-.2-7.7-.3-18.2-.3-10.3 0-16.3 0-17.9.3h-1.4v-5.3h7.3a27.1 27.1 0 004.7-.4l1-.2.6-.6.7-.5v-59z" fill-rule="nonzero"/>\n    <text x="210.3" y="473.5" font-family="\'IBMPlexThai-Medium\',\'IBM Plex Thai\',sans-serif" font-weight="500" font-size="50">\n      INPUT\n    </text>\n    <text x="2292.3" y="473.5" font-family="\'IBMPlexThai-Medium\',\'IBM Plex Thai\',sans-serif" font-weight="500" font-size="50">\n      OUTPUT\n    </text>\n    <g id="net-cell" fill="#fff" stroke="#000" stroke-width="3.8">\n      <path d="M2536.4 182.8a63 63 0 00-63-63h-169a63 63 0 00-63 63v165.8a63 63 0 0063 63h169a63 63 0 0063-63V182.8zM1478.6 182.8a63 63 0 00-63-63h-169a63 63 0 00-63 63v165.8a63 63 0 0063 63h169a63 63 0 0063-63V182.8zM423.7 170.3a63 63 0 00-63-63h-169a63 63 0 00-63 63V336a63 63 0 0063 63h169a63 63 0 0063-63V170.3z"/>\n    </g>\n    <text id="net-node-2" x="2351.4" y="311.9" font-family="\'IBMPlexThai-SemiBold\',\'IBM Plex Thai\',sans-serif" font-weight="500" font-size="100" text-anchor="middle">\n      2\n    </text>\n    <text id="net-node-1" x="1292.1" y="311.9" font-family="\'IBMPlexThai-SemiBold\',\'IBM Plex Thai\',sans-serif" font-weight="500" font-size="100" text-anchor="middle">\n      1\n    </text>\n    <text id="net-node-0" x="238.7" y="299.4" font-family="\'IBMPlexThai-SemiBold\',\'IBM Plex Thai\',sans-serif" font-weight="500" font-size="100" text-anchor="middle">\n      0\n    </text>\n    </svg>\n    '),t.svg=this.base.select("svg").attr("width","100%").attr("height","100%"),t.lines={w0:this.base.select("#net-line-0"),w1:this.base.select("#net-line-1")},t.lineVals={w0:this.base.select("#net-val-0"),w1:this.base.select("#net-val-1")},t.nodeVals={n0:this.base.select("#net-node-0"),n1:this.base.select("#net-node-1"),n2:this.base.select("#net-node-2")},t.nodeVals.n0.text("1"),t.nodeVals.n1.text("_"),t.nodeVals.n2.text("_"),t.lineVals.w0.text("_"),t.lineVals.w1.text("_")}setState(t){const e=this.sels,s=t.x,a=t.y;e.lineVals.w0.text(s.toFixed(2)),e.lineVals.w1.text(a.toFixed(2)),e.nodeVals.n1.text(s.toFixed(2)),e.nodeVals.n2.text((s*a).toFixed(2)),e.lines.w0.attr("stroke-width",this.strokeWidthScale(s)).attr("opacity",this.opacityScale(s)),e.lines.w1.attr("stroke-width",this.strokeWidthScale(a)).attr("opacity",this.opacityScale(a))}data(t){return null}}class F extends p{constructor(t,e,s={},a=0){super(t,e,s,a),this.cssname="quadratic-plots",this.options={margin:{top:0,right:0,bottom:40,left:0},maxWidth:400,maxHeight:250,xRange:[-3,3],yRange:[-.05,8.82]},this.sels={},this.maskId=`line-mask-${this.ID}`,super.initSVG(s),this.base.classed(this.cssname,!0)}get toPxScales(){const t=this.options;return{x:a.q().domain(t.xRange).range([0,t.width]),y:a.q().domain(t.yRange).range([t.height,0])}}intoPx(t){return{x:this.toPxScales.x(t.x),y:this.toPxScales.y(t.y)}}intoMath(t){return{x:this.toPxScales.x.invert(t.x),y:this.toPxScales.y.invert(t.y)}}num2vec(t){this.options;return{x:t,y:Math.pow(t,2)}}lineMaker(t){return a.k().x((t,e)=>this.toPxScales.x(t)).y((e,s)=>this.toPxScales.y(t(e)))}init(){const t=this,e=this.options,s=this.sels;this.base.attr("width",e.maxWidth).attr("height",e.maxHeight),Object.keys(this.layers).forEach(t=>{console.log("Running on layer: ",t);this.layers[t].attr("transform",`${d.translate(e.margin.left,e.margin.top)}`)}),this.layers.bg.append("rect").classed("bg-rect",!0).attr("width",e.width).attr("height",e.height);const i=[1/1.4,1,1.4].map(t=>new E(e=>t*e,e=>t,1,.01));let r;s.paths=i.map(t=>this.layers.main.append("path").datum(k(e.xRange[0],e.xRange[1],100)).classed("line-path",!0).attr("d",e=>this.lineMaker(e=>t.loss(e))(e))),s.cursorLine=this.base.append("path").classed("cursor-line",!0).classed("hidden",!0),s.cursorDots=i.map(t=>this.base.append("circle").classed("cursor-dot",!0).attr("r","3px")),this.base.on("mousemove",function(){const t=a.o(this);s.cursorLine.attr("d",a.k()([[t[0],0],[t[0],e.height]]))}),this.base.on("mouseout",()=>{s.cursorLine.classed("hidden",!0),s.cursorDots.forEach(t=>t.classed("hidden",!0))}),this.base.on("mouseover",()=>{s.cursorLine.classed("hidden",!1),s.cursorDots.forEach(t=>t.classed("hidden",!1))}),this.base.on("click",function(){const e=a.o(this);t.toPxScales.x.invert(e[0]);s.cursorDots.forEach((s,a)=>{const r=i[a],n=t.toPxScales.x.invert(e[0]);s.attr("cx",e[0]),s.attr("cy",t.toPxScales.y(r.loss(n)))}),null==r?r=a.j(e=>{s.cursorDots.forEach((e,s)=>{const a=i[s],r=t.toPxScales.x.invert(+e.attr("cx")),n=a.next(r);e.attr("cx",t.toPxScales.x(n)),e.attr("cy",t.toPxScales.y(a.loss(n)))})},10):(r.stop(),r=null)})}_render(t){}data(t){return null==t?this._data:this}}const W=q.a((t,e)=>e.toFixed(t)),R=W(1),G=W(4);s(67),s(68);console.log("RUNNING"),function(){const t=a.t("#vis-quad"),e=new h(t.node()),s={quadPlot:t.select("#quad-plot")};new F(s.quadPlot,e).data([1/1.4,1,1.4])}(),function(){const t=a.t("#vis1"),e={quiverPlot:t.select("#chart"),qId:t.select("#q-val"),etaId:t.select("#eta-val"),qSlider:t.select("#q-slider"),etaSlider:t.select("#eta-slider"),hessType:t.select("#hess-type"),simpleNet:t.select("#simple-net-container")},s=new h(t.node()),i={graph:new M(e.quiverPlot,s),simpleNet:new C(e.simpleNet,s)},r=0,n=.05,l={q:a.q().range([0,10]).domain([0,1]),eta:a.q().range([1,1e3]).domain([Math.pow(10,-5),.6])};i.graph.q(r),i.graph.eta(n),e.qSlider.property("value",l.q(r)),e.etaSlider.property("value",l.eta(n)),e.qId.text(R(r)),e.etaId.text(G(n)),e.qSlider.on("input",function(){const t=a.t(this),s=l.q.invert(+t.property("value"));i.graph.q(s),e.qId.text(`${R(s)}`)}),e.etaSlider.on("input",function(){const t=a.t(this),s=l.eta.invert(t.property("value"));i.graph.eta(s),e.etaId.text(`${G(s)}`)}),e.hessType.on("input",function(){const t=a.t(this).property("value");i.graph.setUpdater(t)}),s.bind(M.events.stepAdded,t=>{i.simpleNet.setState(t)})}(),function(){const t=a.t("#vis2"),e={chart:t.select("#chart"),chartXDist:t.select("#chart-xdist"),chartLosses:t.select("#chart-losses"),landscapeSelector:t.select(".landscape-select")},s=new h(t.node()),i={graph:new A(e.chart,s,{},n.uid()),chartXDist:new z(e.chartXDist,s),chartLosses:new O(e.chartLosses,s)},r={landscape:"seagull",qs:[0,.5,1],classNames:["golf-ball-sgd","golf-ball-sngd","golf-ball-ngd"]};r.etas={seagull:[.005,.005,.005],hole:[.005,.005,.005],steps:[.005,.005,.005],bowl:[.03,.03,.03],deep_net:[.01,.01,.01]}[r.landscape];const l=I[r.landscape],o=a.w(r.qs,r.etas,r.classNames).map(t=>new T(new E(l.f,l.df,t[0],t[1]),t[2]));i.graph.data(o),s.bind("loss-click",t=>{i.chartXDist.clearPaths(),i.chartLosses.clearPaths()}),e.landscapeSelector.property("value",r.landscape),i.graph.landscape(I[r.landscape]);let c=[];const d=(t,e=[])=>{const s=t.data().map(t=>t.stream),a={next:e=>{i.chartXDist.plotPath(e,t.scales.base2math.x.invert),i.chartLosses.plotPath(e,t.scales.base2loss)}};return e.forEach(t=>t.unsubscribe()),s.map(t=>t.subscribe(a))};e.landscapeSelector.on("input",function(){const t=a.t(this).property("value");i.chartLosses.resetXrange_(),i.chartXDist.resetXrange_(),i.graph.landscape(I[t]),i.graph.dataFromBase(i.graph.dataToBase_()),c=d(i.graph,c)}),c=d(i.graph,c)}(),function(){const t=a.t("#vis3"),e={chart:t.select("#chart"),chartLosses:t.select("#chart-losses"),chartXDist:t.select("#chart-xdist"),qId:t.select("#q-val"),etaId:t.select("#eta-val"),qSlider:t.select("#q-slider"),etaSlider:t.select("#eta-slider"),landscapeSelector:t.select(".landscape-select")},s=new h(t.node()),i={graph:new A(e.chart,s,{maxIter:1500},n.uid()),chartLosses:new O(e.chartLosses,s),chartXDist:new z(e.chartXDist,s)},r="seagull",l=.5,o=.01;s.bind("loss-click",t=>{i.chartXDist.clearPaths(),i.chartLosses.clearPaths()}),i.graph.data([new T(new E(I.hole.f,I.hole.df,l,o),"golf-ball")]);const c=[-3,0].map(t=>Math.pow(10,t)),d={q:a.q().range([0,10]).domain([0,1]),eta:a.r().range([1,1e3]).domain(c).base(10)};i.graph.landscape(I[r]),e.landscapeSelector.property("value",r),e.qSlider.property("value",d.q(l)),e.etaSlider.property("value",d.eta(o)),e.qId.text(R(l)),e.etaId.text(G(o));let p=[];const u=(t,e=[])=>{const s=t.data().map(t=>t.stream),a={next:e=>{i.chartXDist.plotPath(e,t.scales.base2math.x.invert),i.chartLosses.plotPath(e,t.scales.base2loss)}};return e.forEach(t=>t.unsubscribe()),s.map(t=>t.subscribe(a))};e.qSlider.on("input",function(){const t=a.t(this),s=d.q.invert(t.property("value"));i.graph.q(s),e.qId.text(`${R(s)}`)}),e.etaSlider.on("input",function(){const t=a.t(this),s=d.eta.invert(t.property("value"));i.graph.eta(s),e.etaId.text(`${G(s)}`)}),e.landscapeSelector.on("input",function(){const t=a.t(this).property("value");i.chartLosses.resetXrange_(),i.chartXDist.resetXrange_(),i.graph.landscape(I[t]),i.graph.dataFromBase(i.graph.dataToBase_()),p=u(i.graph,p)}),p=u(i.graph,p)}()}});