!function(t){function s(s){for(var a,n,l=s[0],h=s[1],o=s[2],p=0,d=[];p<l.length;p++)n=l[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(t[a]=h[a]);for(c&&c(s);d.length;)d.shift()();return i.push.apply(i,o||[]),e()}function e(){for(var t,s=0;s<i.length;s++){for(var e=i[s],a=!0,l=1;l<e.length;l++){var h=e[l];0!==r[h]&&(a=!1)}a&&(i.splice(s--,1),t=n(n.s=e[0]))}return t}var a={},r={0:0},i=[];function n(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=a,n.d=function(t,s,e){n.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,s){if(1&s&&(t=n(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)n.d(e,a,function(s){return t[s]}.bind(null,a));return e},n.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(s,"a",s),s},n.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},n.p="";var l=window.webpackJsonp=window.webpackJsonp||[],h=l.push.bind(l);l.push=s,l=l.slice();for(var o=0;o<l.length;o++)s(l[o]);var c=h;i.push([69,1]),e()}({67:function(t,s,e){t.exports=e.p+"index.html"},68:function(t,s,e){},69:function(t,s,e){"use strict";e.r(s);var a=e(0);let r=0,i=0;class n{static uid(){return r+=1}static simpleUId(t=""){return t+(i+=1)}}var l=e(82),h=e(70),o=e(71);class c{constructor(t){this.element=t,this.eventListeners=[]}bind(t,s){for(const e of t.split(" ")){this.eventListeners.push({eventName:e,eventFunction:s});const t=t=>s(t.detail,t);this.element.addEventListener(e,t,!1)}}getListeners(){return this.eventListeners}trigger(t,s){this.element.dispatchEvent(new CustomEvent(t,{detail:s}))}}class p{constructor(t,s,e=0){this.parent=t,this.eventHandler=s||new c(this.parent.node()),this.ID=e}newInstance(t){}get events(){return{noEvent:(t=>`${this.baseName}_${t}`)("NoEvent")}}get baseName(){return`${this.cssname}_ID${this.ID}`}updateOptions(t){Object.keys(t).forEach(s=>this.options[s]=t[s])}destroy(){this.base.remove()}}class d{static translate(t,s){return`translate(${t},${s})`}static rotate(t,s){return null==s?`rotate(${t})`:`rotate(${t},${s.x},${s.y})`}static skew(t,s=0){return`skew(${t}, ${s})`}static skewX(t){return`skewX(${t})`}static skewY(t){return`skewY(${t})`}static scale(t,s){return`scale(${t}, ${null!=s?s:t})`}static group(t,s,e={x:0,y:0}){return t.append("g").attr("class",s).attr("transform",d.translate(e.x,e.y))}static addSVG(t,s,e,a){return t.append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+(s+a.left+a.right)+" "+(e+a.top+a.bottom)).attr("preserveAspectRatio","xMidYMid meet").append("g").attr("transform",d.translate(a.left,a.top))}static addArrows(t){t.append("defs").append("marker").attr("id","arrow").attr("markerUnits","strokeWidth").attr("markerWidth",9).attr("markerHeight",9).attr("viewBox","0 0 12 12").attr("refX",6).attr("refY",6).attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").style("fill: #f00")}static insertArrow(t,s,e,a,r,i,n){return t.append("line").attr("x1",s).attr("y1",e).attr("x2",a).attr("y2",r).attr("stroke",i).attr("stroke-width",n).attr("marker-end","url(#arrow)")}static meshgrid(t,s,e,a){const r=(t,s)=>t.map(t=>t*(s[1]-s[0])+s[0]);return((t,s)=>{const e=[];return t.forEach(t=>{s.forEach(s=>{e.push({x:t,y:s})})}),e})(r(l.a(0,t).map(s=>(s+.5)/t),e),r(l.a(0,s).map(t=>(t+.5)/s),a))}}class u extends p{constructor(t,s,e={},a=0){super(t,s,a),this.options={margin:{top:0,right:0,bottom:0,left:0},maxWidth:450,maxHeight:450}}initSVG(t={},s=[]){this.updateOptions(t);const e=this.options;e.width=e.maxWidth-(e.margin.left+e.margin.right),e.height=e.maxHeight-(e.margin.top+e.margin.bottom),this.svg=d.addSVG(this.parent,e.width,e.height,e.margin),this.base=d.group(this.svg,""),this.layers={},s&&s.forEach(t=>{this.layers[t]=d.group(this.base,t)}),this.init()}}const x=t=>t.x*t.y-1,g=a.p().domain([0,.8]).range([.001,.25]);class m{constructor(t=0,s=.1,e=x,a=g){this.err=e,this.q=t,this.eta=s,this.step2lr=a}get lrScale(){return this.step2lr(this.eta)}absErr(t){return Math.abs(this.err(t))}loss(t){return Math.pow(this.err(t),2)}gradient(t){const s=this.err(t);return{x:t.y*s,y:t.x*s}}eigenvalues(t){const s=(t,s)=>Math.pow(t,2)+Math.pow(s,2);return{x:s(t.x,t.y),y:s(t.x,t.y)}}dv(t){const s=this.gradient(t),e=this.eigenvalues(t);return{x:-s.x/Math.abs(Math.pow(e.x,this.q)),y:-s.y/Math.abs(Math.pow(e.y,this.q))}}lr(t){const s=this.dv(t),e=this.absErr(t),a=this.step2lr(this.eta);return{x:a*s.x/e,y:a*s.y/e}}next(t){const s=this.dv(t);return{x:t.x+s.x*this.eta,y:t.y+s.y*this.eta}}nextLr(t){const s=this.lr(t);return{x:t.x+s.x,y:t.y+s.y}}}class y extends m{eigenvalues(t){return{x:2*Math.pow(t.y,2),y:2*Math.pow(t.x,2)}}}var f=e(78),b=e(76),v=e(72),w=e(80);class k extends u{constructor(t,s,e={}){super(t,s,e),this.cssname="simple-graph",this.options={maxWidth:450,maxHeight:500,margin:{top:50,right:75,bottom:125,left:50},pad:30,xrange:[0,2.5],yrange:[0,2.5],n:500,m:500},this.scales={},this.sels={},this._curr={x:.1,y:.2},this.ideal=1,super.initSVG(this.options),this.base.classed(this.cssname,!0),this.updater=new m,this.initPlot()}setUpdater(t){this.q(),this.eta();"block"==t?this.updater=new y(this.q(),this.eta()):"full"==t?this.updater=new m(this.q(),this.eta()):console.log("Please enter a valid input as updater"),this.updateQuivers()}plotMinimum(){const t=this.options,s=this.scales,e=(s=>l.a(0,s).map(a.p().domain([0,s]).range([1e-5,t.xrange[1]])))(100),r=e.map(t=>1/t),i=h.a(e.map(s.x),r.map(s.y)),n=a.j(),o=n(i),c=this.base.append("g").attr("id","minimum-group");console.log("Path data: ",o),c.append("path").attr("d",n(i)).classed("minimum",!0).style("stroke-width",2.5).style("stroke","blue").style("fill",null)}plotContours(){const t=this.options,s=this.scales,e=function(t,s,e,a,r){let i=new Array(t*s);for(var n=.5,l=0;n<s;++n)for(var h=.5;h<t;++h,++l){const o=h/t*(e[1]-e[0])+e[0],c=(1-n/s)*(a[1]-a[0])+a[0];i[l]=r(o,c)}return i}(t.n,t.m,t.xrange,t.yrange,(t,s)=>this.updater.absErr({x:t,y:s}));let r=a.o(a.m(e),a.k(e),.25);const i=(.91*r[0]+(1-.91)*r[1])/2;r=o.a(1,i,r),s.color=a.q().interpolate(()=>a.i),s.contours.thresholds(r);const n=s.contours(e);this.base.append("g").attr("id","contour-group").selectAll("path.contour").data(n).join("path").attr("class","contour").attr("d",a.g(a.f().scale(t.width/t.n))).attr("fill",t=>s.color(t.value)).classed("main-fit",t=>t.value==i).classed("not-fit",t=>t.value!=i)}addCircle(t,s=null){const e=this.scales,a=this.sels;return null!=s&&this.base.append("line").attr("x1",e.x(s.x)).attr("y1",e.y(s.y)).attr("x2",e.x(t.x)).attr("y2",e.y(t.y)).classed("descending-line",!0),a.circle=this.base.append("circle").attr("cx",e.x(t.x)).attr("cy",e.y(t.y)).attr("r",2).classed("descending-point",!0),t}clearCircles(){a.t(".descending-point").remove(),a.t(".descending-line").remove()}clearQuivers(){a.t(".quiver").remove(),this.sels.arrows=[]}plotDescent(){const t=this;let s=null;const e={next:t=>{this.addCircle(t,s),s=t},err:t=>console.log(t),complete:()=>console.log("COMPLETE")};this.ticker=Object(f.a)(10).pipe(Object(b.a)((()=>{this.addCircle(this.curr()),s=this.curr()})()),Object(v.a)(s=>t.updater.next(s),t.curr()),Object(w.a)(1e3)).subscribe(e)}intoVis(t){return{x:this.scales.x(t.x),y:this.scales.y(t.y)}}intoMath(t){return{x:this.scales.x.invert(t.x),y:this.scales.y.invert(t.y)}}updateQuivers(){const t=this,s=this.sels,e=this.scales;s.arrows.forEach(s=>{const a=this.intoMath({x:+s.attr("x1"),y:+s.attr("y1")}),r=t.updater.nextLr(a);s.attr("x2",e.x(r.x)).attr("y2",e.y(r.y))})}createQuivers(){const t=this,s=this.options,e=this.scales,a=this.sels,r=d.meshgrid(8,8,s.xrange,s.yrange),i=this.base.append("g").attr("id","quiver-group");this.clearQuivers(),a.arrows=r.map(s=>{const a=t.updater.nextLr(s),r=d.insertArrow(i,e.x(s.x),e.y(s.y),e.x(a.x),e.y(a.y),"red",2);return r.classed("quiver",!0),r})}initPlot(){this.plotContours(),this.createQuivers()}init(){const t=this,s=this.options,e=this.scales,r=this.sels;d.addArrows(this.svg),e.contours=a.c().size([s.n,s.m]),e.curve=a.d.alpha(.5),e.x=a.p().domain(s.xrange).range([0,s.width]),e.y=a.p().domain(s.yrange).range([s.height,0]),r.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,s.height)).call(a.a(e.x).ticks(3,"s")),r.yaxis=this.base.append("g").attr("class","axis axis--y").attr("transform",d.translate(0,0)).call(a.b(e.y).ticks(3,"s")),r.xlabel=this.base.append("text").text("w0").attr("class","titles").attr("transform",d.translate(s.width/2,s.height+s.pad)),r.ylabel=this.base.append("text").text("w1").attr("class","titles").attr("transform",d.translate(-s.pad,s.height/2)+d.rotate(-90)),this.base.on("click",function(){null!=t.ticker&&t.ticker.unsubscribe();const s=a.n(this);t.curr({x:e.x.invert(s[0]),y:e.y.invert(s[1])}),t.addCircle(t.curr()),t.clearCircles(),t.plotDescent()})}curr(t){return null==t?this._curr:(this._curr=t,this)}data(t){return null==t?this._data:(this._data=t,this)}q(t){return null==t?this.updater.q:(this.updater.q=t,this.updateQuivers(),this)}eta(t){return null==t?this.updater.eta:(this.updater.eta=t,this.updateQuivers(),this)}}const M=(t,s,e)=>{const r=(s-t)/(e-1);return a.o(t,s+r,r).slice(0,e)};a.u.prototype.clear=function(){return this.selectAll("*").remove(),this},a.u.prototype.toggleClass=function(t){return this.classed(t,!this.classed(t)),this},a.u.prototype.show=function(){return this.style("display","initial"),this},a.u.prototype.hide=function(){return this.style("display","none"),this},a.u.prototype.toggle=function(){var t="none"==this.style("display");return this.style("display",t?"inherit":"none")},a.u.prototype.after=function(t){var s=[];return this.each(function(){var e=document.createElement(t);this.parentNode.insertBefore(e,this.nextSibling),s.push(e)}),a.t(s)},a.u.prototype.before=function(t){var s=[];return this.each(function(){var e=document.createElement(t);this.parentNode.insertBefore(e,this),s.push(e)}),a.t(s)};var q=e(73),S=e(74),P=e(77),L=e(79);const _=t=>.5*Math.pow(t,2),E=t=>s=>t.loss(t.f(s)),j={hole:{name:"hole",f:t=>Math.tanh(t/2),df:t=>Math.pow(Math.cosh(t/2),-2)/2,xrange:[-12,12],yrange:[0,.6],loss:_},steps:{name:"steps",f:t=>Math.tanh(t-11)/4+Math.tanh(t-6)/4+Math.tanh(t)+Math.tanh(t+6)/4+Math.tanh(t+11)/4,df:t=>Math.pow(Math.cosh(t-11),-2)/4+Math.pow(Math.cosh(t-6),-2)/4+Math.pow(Math.cosh(t),-2)+Math.pow(Math.cosh(t+6),-2)/4+Math.pow(Math.cosh(t+11),-2)/4,xrange:[-13.6,13.6],yrange:[0,2.5],loss:_},seagull:{name:"seagull",f:t=>Math.sign(t)*(1-1/(1+Math.abs(t))),df:t=>1/Math.pow(1+Math.abs(t),2),xrange:[-12,12],yrange:[0,.6],loss:_},bowl:{name:"bowl",f:t=>Math.sinh(t/5),df:t=>Math.cosh(t/5)/5,xrange:[-15,15],yrange:[0,100],loss:_},deep_net:{name:"deep_net",f:t=>Math.pow(Math.abs(t/10+1),3)-1,df:t=>.3*Math.pow(Math.abs(t/10+1),2),xrange:[-7,7],yrange:[0,4],loss:_}};class A{constructor(t,s,e=0,a=.1){this.f=t,this.df=s,this.q=e,this.eta=a}loss(t){return _(this.f(t))}gradient(t){return this.f(t)*this.df(t)}psdhess(t){return Math.pow(this.df(t),2)}updateModifier(t){return Math.pow(this.df(t),1-2*this.q)}updateAmt(t){return this.f(t)*this.updateModifier(t)}step(t){return-this.eta*this.updateAmt(t)}next(t){return t+this.step(t)}}var $=e(81);class I{constructor(t,s,e=0){this.updater=t,this._x=e,this.classname=s,this.stream=new $.a}get x(){return this._x}set x(t){this._x=t}nextX(){return this.updater.next(this._x)}next(){this.nextX();return new I(this.updater,this.classname,this.nextX())}step_(t=null){return this.x=null!=t?t:this.nextX(),this.stream.next({classname:this.classname,x:this.x,loss:this.updater.loss(this.x)}),this}toVec(t){return{x:this._x,y:t(this._x)}}q(t){return null==t?this.updater.q:(this.updater.q=t,this)}eta(t){return null==t?this.updater.eta:(this.updater.eta=t,this)}}class O extends u{constructor(t,s,e={},a=0){super(t,s,e,a),this.cssname="golf-hole-chart",this.options={maxWidth:400,maxHeight:200,margin:{top:10,right:10,bottom:40,left:50},pad:30,maxIter:600,landscape:j.hole},this.scales={},this.sels={},this.maskId=`line-mask-${this.ID}`,super.initSVG(e,["bg"]),this.base.classed(this.cssname,!0);const r=this.options.landscape,i=[new I(new A(r.f,r.df,0,.9),"golf-ball-sgd",4),new I(new A(r.f,r.df,.5,.1),"golf-ball-sngd",3),new I(new A(r.f,r.df,1,.003),"golf-ball-ngd",5)];this.data(i),this.initBalls()}landscape(t){if(null==t)return this.options.landscape;const s=this.options;return s.landscape=t,this.updateScales(s),this.updateAxes(this.scales,s),this.data().forEach(s=>{s.updater.f=t.f,s.updater.df=t.df}),this.clearCurve(),this.plotCurve(),this}get dataHead(){try{return this.data()[0]}catch(t){console.log("Looks like there is no data in this golf hole"),console.log(t)}}intoVis(t){return{x:this.scales.x(t.x),y:this.scales.y(t.y)}}intoMath(t){return{x:this.scales.x.invert(t.x),y:this.scales.y.invert(t.y)}}num2vec(t){return{x:t,y:this.options.landscape.loss(t)}}ball2vis(t){return this.intoVis(t.toVec(E(this.options.landscape)))}plotBall(t){const s=(t=>"."+t)(t.classname),e=this.ball2vis(t);this.sels.ball=this.base.selectAll(s).data([e]).join("circle").classed("golf-ball",!0).classed(t.classname,!0).attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r","5px")}clearCurve(){this.layers.bg.selectAll(".line").remove(),this.sels.maskLine.html(""),this.base.selectAll("#line-background").html("")}plotCurveByDefault(t){const s=this.scales;this.sels;s.paths.forEach(s=>{this.layers.bg.append("path").datum(t).attr("class","line").attr("d",t=>s(t))})}plotCurveByGradient(t){const s=this,e=this.scales,r=this.sels,i=this.options,n=i.width*(t[1]-t[0])/(a.k(t)-a.m(t)),l=s.data()[0].updater,h=e.paths[0];r.maskLine.attr("d",h(t));a.r(a.h);const o=t.map(t=>Math.log(Math.abs(l.updateModifier(t)))),c=q.a((t,s,e)=>{const r=S.a(t,s),i=P.a(r,e),n=a.l(i);return e.map(t=>t-n)})(-2,2),p=a.v(t,c(o)).map(t=>({x:t[0],updateAmt:t[1]})),d=a.p().domain([-2,0,2]).range(["#67a9cf","#f7f7f7","#ef8a62"]).clamp(!1);r.lineBackground.selectAll(".grad-box").data(p).join("rect").classed("grad-box",!0).attr("height",i.height).attr("width",s.scales.x(n)).attr("x",t=>s.scales.x(t.x)).attr("y",0).attr("fill",t=>d(t.updateAmt)),r.lineBackground.attr("mask",`url(#${this.maskId})`)}plotCurve(){const t=this.options,s=M(t.landscape.xrange[0],t.landscape.xrange[1],1e3),e=this;this.scales,this.sels;null!=e.data()&&(e.data().length>1?e.plotCurveByDefault(s):e.plotCurveByGradient(s))}updateScales(t){const s=this.scales;s.x=a.p().domain(t.landscape.xrange).range([0,t.width]),s.y=a.p().domain(t.landscape.yrange).range([t.height,0]),s.paths=this.newPaths(t.landscape)}updateAxes(t,s){this.sels.xaxis.call(a.a(t.x).tickValues([0]).tickFormat(t=>"0"))}init(){const t=this.options,s=this.scales,e=this.sels;this.updateScales(t),e.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,t.height)),e.xlabel=this.base.append("text").text("θ - θ*").attr("class","titles").attr("transform",d.translate(t.width/2,t.height+t.pad)),e.mask=this.base.append("mask").attr("id",this.maskId),e.maskBackground=e.mask.append("rect").attr("width",t.width).attr("height",t.height).attr("fill","black"),e.maskLine=e.mask.selectAll("#transparent-line").data([1]).join("path").attr("id","transparent-line").attr("stroke","white").attr("stroke-width","5px"),e.lineBackground=this.base.selectAll("#line-background").data([1]).join("g").attr("id","line-background"),this.updateAxes(s,t),s.paths=this.newPaths(t.landscape);M(t.landscape.xrange[0],t.landscape.xrange[1],1e3);this.plotCurve()}newPaths(t){const s=this.scales;return[a.j().x((t,e)=>s.x(t)).y((e,a)=>s.y(E(t)(e))).curve(a.e)]}initBalls(){const t=this,s=this.options;this.sels.backdrop=this.layers.bg.append("g").attr("id","backdrop").classed("grass",!0).append("rect").attr("height",s.height).attr("width",s.width);const e=t=>t<s.landscape.xrange[0],r=t=>t>s.landscape.xrange[1],i=t=>{let a;return a=isNaN(t)?s.landscape.xrange[0]:e(t)?s.landscape.xrange[0]:r(t)?s.landscape.xrange[1]:t};const n={next:s=>{s.forEach(s=>t.plotBall(s))},error:t=>console.log("ERROR: ",t),complete:()=>console.log("COMPLETE")},l=()=>Object(f.a)(10).pipe(Object(v.a)(s=>(L.a(t=>a.s(`.${t.classname}`).classed("dead-ball"),t.data())&&h.unsubscribe(),t.data().forEach(s=>(function(s){const e=s.nextX(),a=t.base.select(`.${s.classname}`),r=i(e);return a.classed("dead-ball")?s:s.step_(r)})(s)),t.data()),t.data()),Object(w.a)(s.maxIter)).subscribe(n);let h={unsubscribe:()=>console.log("Empty Ticker!")};const o=function(){h.unsubscribe();const s=function([t,s]){return{x:t,y:s}}(a.n(this));a.t(".golf-ball").classed("dead-ball",!1),t.data().forEach((e,a)=>e.x=t.intoMath(s).x),t.data().forEach(s=>t.plotBall(s)),t.eventHandler.trigger("loss-click",{}),h=l()};this.sels.backdrop.on("click",o),this.sels.lineBackground.on("click",o)}q(t){return null==t?this.dataHead.updater.q:(this.dataHead.q(t),this.plotCurve(),this)}eta(t){return null==t?this.dataHead.updater.q:(this.dataHead.eta(t),this)}data(t){return null==t?this._data:(this._data=t,this)}}var B=e(83),C=e(75);class D extends u{intoVis(t){return{x:this.scales.x(t.x),y:this.scales.y(t.y)}}intoMath(t){return{x:this.scales.x.invert(t.x),y:this.scales.y.invert(t.y)}}}const X=1;class H extends D{constructor(t,s,e={}){super(t,s,e),this.cssname="line-plot",this.options={maxWidth:350,maxHeight:250,margin:{top:10,right:10,bottom:30,left:30},pad:{top:5,right:1,bottom:10,left:15},xrange:[0,600],yrange:[2,.01]},this.scales={},this.sels={},super.initSVG(this.options,["bg"]),this.base.classed(this.cssname,!0),this.data({})}addDataKey_(t){const s=this;B.a(t,this.data())||(console.log(`Adding key: ${t}`),this.data()[t]={sel:s.initBaseLine(t),vals:[]})}updateScales(t){const s=this.options;this.scales.x=a.p().domain(t).range([0,s.width]).clamp(!0)}clearPaths(){this.data(P.a(t=>C.a("vals",[],t),this.data()))}plotPath(t){const s=this;this.addDataKey_(t.classname);const e=this.data()[t.classname];e.vals.push(t.loss);const a=[Math.max(0,e.vals.length-this.options.xrange[1]),Math.max(e.vals.length,this.options.xrange[1])];this.updateScales(a),this.createPath(),e.sel.data([e]).join("path").classed(t.classname,!0).attr("d",t=>s.path(t.vals))}initBaseLine(t){return this.layers.bg.append("path").classed(t,!0).classed("line",!0)}init(){this.options,this.scales,this.sels;this.createScales(),this.createPath(),this.createAxes()}createScales(){const t=this.scales,s=this.options;t.x=a.p().domain(s.xrange).range([0,s.width]).clamp(!0),t.y=a.q().domain(s.yrange).range([0,s.height]).clamp(!0)}createAxes(){const t=this.sels,s=this.scales,e=this.options;t.yaxis=this.base.append("g").attr("class","axis axis--y").attr("transform",d.translate(0,-X)).call(a.b(s.y).tickFormat("").ticks(4)),t.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,e.height-X)).call(a.a(s.x).tickFormat("").ticks(4)),this.base.append("text").attr("transform",d.translate(e.width/2,e.margin.top+e.height+10)).style("text-anchor","middle").text("Time"),this.base.append("text").style("text-anchor","middle").text("Loss").attr("y",e.pad.left-e.margin.left).attr("x",e.pad.top-e.height/2).attr("transform",d.rotate(-90))}createPath(){this.path=a.j().x((t,s)=>this.scales.x(s)).y((t,s)=>this.scales.y(t)).curve(a.e)}data(t){return null==t?this._data:(this._data=t,this)}}const V=1;class N extends D{constructor(t,s,e={}){super(t,s,e),this.cssname="line-plot",this.options={maxWidth:350,maxHeight:250,margin:{top:10,right:10,bottom:30,left:30},pad:{top:5,right:1,bottom:10,left:15},xrange:[0,600],yrange:[15,0]},this.scales={},this.sels={},super.initSVG(this.options,["bg"]),this.base.classed(this.cssname,!0),this.data({})}addDataKey_(t){const s=this;B.a(t,this.data())||(console.log(`Adding key: ${t}`),this.data()[t]={sel:s.initBaseLine(t),vals:[]})}clearPaths(){this.data(P.a(t=>C.a("vals",[],t),this.data()))}plotPath(t){const s=this;this.addDataKey_(t.classname);const e=this.data()[t.classname];e.vals.push(Math.abs(t.x));const a=[Math.max(0,e.vals.length-this.options.xrange[1]),Math.max(e.vals.length,this.options.xrange[1])];this.updateScales(a),this.createPath(),e.sel.data([e]).join("path").classed(t.classname,!0).attr("d",t=>s.path(t.vals))}updateScales(t){const s=this.options;this.scales.x=a.p().domain(t).range([0,s.width]).clamp(!0)}initBaseLine(t){return this.layers.bg.append("path").classed(t,!0).classed("line",!0)}createScales(){const t=this.options;this.scales.x=a.p().domain(t.xrange).range([0,t.width]).clamp(!0),this.scales.y=a.p().domain(t.yrange).range([0,t.height]).clamp(!0)}init(){this.options,this.scales,this.sels;this.createScales(),this.createPath(),this.createAxes()}createAxes(){const t=this.sels,s=this.scales,e=this.options;t.xaxis=this.base.append("g").attr("class","axis axis--x").attr("transform",d.translate(0,e.height-V)).call(a.a(s.x).ticks(4).tickFormat("")),t.yaxis=this.base.append("g").attr("class","axis axis--y").attr("transform",d.translate(0,-V)).call(a.b(s.y).ticks(4).tickFormat("")),this.base.append("text").attr("transform",d.translate(e.width/2,e.margin.top+e.height+10)).style("text-anchor","middle").text("Time"),this.base.append("text").style("text-anchor","middle").text("θ - θ*").attr("y",e.pad.left-e.margin.left).attr("x",e.pad.top-e.height/2).attr("transform",d.rotate(-90))}createPath(){this.path=a.j().x((t,s)=>this.scales.x(s)).y((t,s)=>this.scales.y(t)).curve(a.e)}data(t){return null==t?this._data:(this._data=t,this)}}const G=q.a((t,s)=>s.toFixed(t)),T=G(1),Q=G(4);e(67),e(68);console.log("RUNNING"),function(){const t=a.s("#vis1"),s={quiverPlot:t.select("#chart"),qId:t.select("#q-val"),etaId:t.select("#eta-val"),qSlider:t.select("#q-slider"),etaSlider:t.select("#eta-slider"),hessType:t.select("#hess-type")},e={graph:new k(s.quiverPlot)},r=0,i=.1,n={q:a.p().range([0,10]).domain([0,1]),eta:a.p().range([1,1e3]).domain([Math.pow(10,-5),.6])};e.graph.q(r),e.graph.eta(i),s.qSlider.property("value",n.q(r)),s.etaSlider.property("value",n.eta(i)),s.qId.text(T(r)),s.etaId.text(Q(i)),s.qSlider.on("input",function(){const t=a.s(this),r=n.q.invert(+t.property("value"));e.graph.q(r),s.qId.text(`${T(r)}`)}),s.etaSlider.on("input",function(){const t=a.s(this),r=n.eta.invert(t.property("value"));e.graph.eta(r),s.etaId.text(`${Q(r)}`)}),s.hessType.on("input",function(){const t=a.s(this).property("value");e.graph.setUpdater(t)})}(),function(){const t=a.s("#vis2"),s={chart:t.select("#chart"),chartXDist:t.select("#chart-xdist"),chartLosses:t.select("#chart-losses"),landscapeSelector:t.select(".landscape-select")},e="seagull",r=new c(t.node()),i={graph:new O(s.chart,r,{},n.uid()),chartXDist:new N(s.chartXDist,r),chartLosses:new H(s.chartLosses,r)};r.bind("loss-click",t=>{i.chartXDist.clearPaths(),i.chartLosses.clearPaths()}),s.landscapeSelector.property("value",e),i.graph.landscape(j[e]);const l=i.graph.data().map(t=>t.stream),h={next:t=>{i.chartXDist.plotPath(t),i.chartLosses.plotPath(t)}};l.forEach(t=>t.subscribe(h)),s.landscapeSelector.on("input",function(){const t=a.s(this).property("value");i.graph.landscape(j[t])})}(),function(){const t=a.s("#vis3"),s={chart:t.select("#chart"),chartLosses:t.select("#chart-losses"),chartXDist:t.select("#chart-xdist"),qId:t.select("#q-val"),etaId:t.select("#eta-val"),qSlider:t.select("#q-slider"),etaSlider:t.select("#eta-slider"),landscapeSelector:t.select(".landscape-select")},e=new c(t.node()),r={graph:new O(s.chart,e,{maxIter:1500},n.uid()),chartLosses:new H(s.chartLosses,e),chartXDist:new N(s.chartXDist,e)},i=.5,l=.1,h="seagull";e.bind("loss-click",t=>{r.chartXDist.clearPaths(),r.chartLosses.clearPaths()}),r.graph.data([new I(new A(j.hole.f,j.hole.df,i,l),"golf-ball")]),r.graph.landscape(j.steps);const o=[-3,2].map(t=>Math.pow(10,t)),p={q:a.p().range([0,10]).domain([0,1]),eta:a.q().range([1,1e3]).domain(o).base(10)};r.graph.landscape(j[h]),s.landscapeSelector.property("value",h),s.qSlider.property("value",p.q(i)),s.etaSlider.property("value",p.eta(l)),s.qId.text(T(i)),s.etaId.text(Q(l)),s.qSlider.on("input",function(){const t=a.s(this),e=p.q.invert(t.property("value"));r.graph.q(e),s.qId.text(`${T(e)}`)}),s.etaSlider.on("input",function(){const t=a.s(this),e=p.eta.invert(t.property("value"));r.graph.eta(e),s.etaId.text(`${Q(e)}`)}),s.landscapeSelector.on("input",function(){const t=a.s(this).property("value");r.graph.landscape(j[t])});const d=r.graph.data().map(t=>t.stream),u={next:t=>{r.chartXDist.plotPath(t),r.chartLosses.plotPath(t)}};d.forEach(t=>t.subscribe(u))}()}});